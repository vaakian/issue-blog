<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Vite on Study Notes</title><link>https://note.vaakian.com/categories/vite/</link><description>Recent content in Vite on Study Notes</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 10 May 2022 14:50:32 +0800</lastBuildDate><atom:link href="https://note.vaakian.com/categories/vite/index.xml" rel="self" type="application/rss+xml"/><item><title>Write a simple Vite plugin</title><link>https://note.vaakian.com/frontend/vite-plugin/</link><pubDate>Tue, 10 May 2022 14:50:32 +0800</pubDate><guid>https://note.vaakian.com/frontend/vite-plugin/</guid><description>prerequisites 在 webpack 中，分为 plugin 和 loader，其中 loader 的职责被划分为单一的翻译转换。 而在 vite 中，去除了 loader 的概念，而是将代码转换/编译的概念统一放到了 plugin 中去。
plugin vite: using plugin
目的 理解最基本的 plugin 概念，并为 vite 编写一个最简单的 plugin。
任务：创建一个 plugin 将以下文件进行编译，并实现import 文件：hello.wj
{ &amp;#34;name&amp;#34;: &amp;#34;John&amp;#34;, &amp;#34;age&amp;#34;: 12 } ---- &amp;lt;div&amp;gt;{ name }&amp;lt;/div&amp;gt; &amp;lt;div style=&amp;#34;color: green; font-size: 24px;&amp;#34;&amp;gt;{ age }&amp;lt;/div&amp;gt; 编译为
&amp;lt;div&amp;gt;John&amp;lt;/div&amp;gt; &amp;lt;div style=&amp;#34;color: green; font-size: 24px;&amp;#34;&amp;gt;12&amp;lt;/div&amp;gt; 在 js 文件中引入
import content from &amp;#39;./hello.wj&amp;#39;; console.log(content); /* &amp;lt;div&amp;gt;John&amp;lt;/div&amp;gt; &amp;lt;div style=&amp;#34;color: green; font-size: 24px;&amp;#34;&amp;gt;12&amp;lt;/div&amp;gt; */ 实现 在 vite 中，plugin 接受一个对象，包含很多属性，这里用到name和transform，transform 是一个函数，接受 code（文件内容）和 id（文件绝对路径）。如果 transform 返回值不为空，则这时候将返回的值作为编译后的代码，否则将返回原始的 code。</description></item></channel></rss>